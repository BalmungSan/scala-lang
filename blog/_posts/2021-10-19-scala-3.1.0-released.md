---
layout: blog-detail
post-type: blog
by: PaweÅ‚ Marks, VirtusLab
title: Scala 3.1.0 released!
---
Hello from the Scala 3 team! It has already been six weeks since we have announced the release candidate for the first minor version after the initial release of Scala 3. Now, after two more RCs, we can confidently promote Scala 3.1.0-RC3 to a new stable release of the language. In other words, Scala 3.1.0 is officially out!

Thanks to Scala 3 strong compatibility guarantees, all code working in 3.0.2 will also work in 3.1. On the other hand, switching to Scala 3.1 allows you to use many improvements and a handful of newly stabilized APIs.

## What's new in 3.1

### New experimental feature: safer exceptions

A new experimental feature that allows declaring and checking which exceptions can be thrown. It relies on the effects as implicit capabilities pattern.

You can opt-in using following import.

```scala
import language.experimental.saferExceptions
```

Now it is possible to mark types with exception that can be thrown during the evaluation:

```scala
def f(x: Double): Double canThrow LimitExceeded =
  if x < limit then f(x) else throw LimitExceeded()
```

You can read more in [the document proposing this feature](https://github.com/lampepfl/dotty/blob/release-3.1.0/docs/docs/reference/experimental/canthrow.md).

### Efficient bytecode for matching over strings

Scala, since 3.0.0, has been able to optimize pattern matches with `Int` as a scrutinee type by emitting bytecode containing very efficient instructions: `lookupswitch` or `tableswitch`. 
Now in Scala 3.1, similar behavior was implemented for matching over `String` literals.

```scala
fruit match
  case "apple"  => 1
  case "orange" => 2
  case "banana" => 3
  case _        => 0
```

will now generate `lookupswitch` over hash codes of `String` literals instead of a chain of conditional expressions. This behavior is consistent with what Java does and more performant than the old approach.

### Support for `-Wconf` and `@nowarn`

We have added a `-Wconf` compiler flag that allows filtering and configuring compiler warnings (silence them, or turn them into errors).

We have also integrated [the silencer plugin](https://github.com/ghik/silencer) into the compiler, which allows suppressing warnings locally using the `@nowarn` annotation.

`-Wconf` and `@nowarn` work largely the same way as in Scala 2, but some filters for selecting warnings are different. For the more details see the output of `-Wconf:help` flag.

### Simplified Manifest synthesis

For the sake of compatibility with Scala 2, the Scala 3 compiler now generates given instances for the `Manifest` trait. The new implementation is a slightly simplified approximation of the Scala 2 implementation. It guarantees that any of the expressions:

- `manifest[A] == manifest[B]`
- `manifest[A].runtimeClass == manifest[B].runtimeClass`
- `optManifest[A] == optManifest[B]`
- `optManifest[A].asInstanceOf[ClassTag[A]].runtimeClass == optManifest[B].asInstanceOf[ClassTag[B]].runtimeClass`

that were true in Scala 2, will also remain true when compiled with Scala 3.

### Other changes

- `Unapply.apply` constructor was added to the reflection API
- Scastie was integrated into Scaladoc to make snippets interactive.
- `@experimental` spec was changed. See more detail in [the design document](https://github.com/lampepfl/dotty/blob/release-3.1.0/docs/docs/reference/other-new-features/experimental-defs.md)
- Now `TastyInspector.{inspectTastyFiles, inspectTastyFilesInJar, inspectAllTastyFiles}` return a boolean value indicating whether the process succeeded
- A `Wildcard` was made a subtype of `Ident` in the reflection API
- `TypedOrTest` was added as a supertype of `Typed` in the reflection API

Beside that Scala 3.1.0 introduced multiple small improvements and fixed a handful of bugs. You can see [the detailed changelog](https://github.com/lampepfl/dotty/releases/tag/3.1.0) on GitHub.

## What's next

During the Scala 3.1.0 stabilization period, which took the last six weeks, we haven't stopped improving the language and fixing the in the compiler. You can already test the results of our work, using the published release candidates: Scala 3.1.1-RC1. [The full changelog](https://github.com/lampepfl/dotty/releases/tag/3.1.1-RC1) is as always available on GitHub.

You can expect the stable release of Scala 3.1.1 in early December.

## Contributors

Thank you to all the contributors who made the release of 3.1.0 possible ðŸŽ‰

According to `git shortlog -sn --no-merges 3.0.2..3.1.0` these are:

```
   // TODO
```

## Library authors: Join our community build

Scala 3 now has a set of widely-used community libraries that are built against every nightly Scala 3 snapshot.
Join our [community build](https://github.com/lampepfl/dotty/tree/master/community-build)
to make sure that our regression suite includes your library.

[Scastie]: https://scastie.scala-lang.org/?target=dotty

[@odersky]: https://github.com/odersky
[@DarkDimius]: https://github.com/DarkDimius
[@smarter]: https://github.com/smarter
[@felixmulder]: https://github.com/felixmulder
[@nicolasstucki]: https://github.com/nicolasstucki
[@liufengyun]: https://github.com/liufengyun
[@OlivierBlanvillain]: https://github.com/OlivierBlanvillain
[@biboudis]: https://github.com/biboudis
[@allanrenucci]: https://github.com/allanrenucci
[@Blaisorblade]: https://github.com/Blaisorblade
[@Duhemm]: https://github.com/Duhemm
[@AleksanderBG]: https://github.com/AleksanderBG
[@milessabin]: https://github.com/milessabin
[@anatoliykmetyuk]: https://github.com/anatoliykmetyuk
